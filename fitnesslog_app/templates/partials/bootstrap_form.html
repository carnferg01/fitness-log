{# templates/partials/bootstrap_form.html #}
{% if form.non_field_errors %}
  <div class="alert alert-danger">
    {{ form.non_field_errors|striptags }}
  </div>
{% endif %}

{% for field in form %}
  <div class="mb-3">
    <label for="{{ field.id_for_label }}" class="form-label">{{ field.label }}</label>
    {% with field.field.widget.attrs.placeholder as placeholder %}
      {% if field.field.widget.input_type == "textarea" %}
        <textarea
          name="{{ field.name }}"
          class="form-control{% if field.errors %} is-invalid{% endif %}"
          id="{{ field.id_for_label }}"
          placeholder="{{ placeholder|default:'' }}"
        >{{ field.value|default_if_none:'' }}</textarea>

      {% elif field.field.widget.input_type == "select" %}
        <select
          name="{{ field.name }}"
          class="form-select{% if field.errors %} is-invalid{% endif %}"
          id="{{ field.id_for_label }}"
        >
          {% for option in field.field.choices %}
            <option value="{{ option.0 }}" {% if option.0 == field.value %}selected{% endif %}>
              {{ option.1 }}
            </option>
          {% endfor %}
        </select>

      {% else %}
        <input
          type="{{ field.field.widget.input_type }}"
          name="{{ field.name }}"
          class="form-control{% if field.errors %} is-invalid{% endif %}"
          id="{{ field.id_for_label }}"
          value="{{ field.value|default_if_none:'' }}"
          placeholder="{{ placeholder|default:'' }}"
        >
      {% endif %}
    {% endwith %}

    {% comment %} {% if field.field.widget.input_type == "textarea" %}
      <textarea
        name="{{ field.name }}"
        class="form-control{% if field.errors %} is-invalid{% endif %}"
        id="{{ field.id_for_label }}"
      >{{ field.value|default_if_none:'' }}</textarea>

    {% elif field.field.widget.input_type == "select" %}
      <select
        name="{{ field.name }}"
        class="form-select{% if field.errors %} is-invalid{% endif %}"
        id="{{ field.id_for_label }}"
      >
        {% for option in field.field.choices %}
          <option value="{{ option.0 }}" {% if option.0 == field.value %}selected{% endif %}>
            {{ option.1 }}
          </option>
        {% endfor %}
      </select>

    {% else %}
      <input
        type="{{ field.field.widget.input_type }}"
        name="{{ field.name }}"
        class="form-control{% if field.errors %} is-invalid{% endif %}"
        id="{{ field.id_for_label }}"
        value="{{ field.value|default_if_none:'' }}"
      >
    {% endif %} {% endcomment %}

    {% if field.errors %}
      <div class="invalid-feedback">
        {{ field.errors|striptags }}
      </div>
    {% endif %}
  </div>
{% endfor %}
