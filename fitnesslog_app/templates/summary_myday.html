{% extends "base.html" %}

{% block title %}My day{% endblock %}

{% block content %}

<style>
    body { font-family: Arial, sans-serif; margin: 2em; }
    .form-group { margin-bottom: 1em; }
</style>

/<!-- Header -->
<div class="d-flex justify-content-between align-items-center mb-4">
    <h1>All Activities</h1>
    <div>
        <a href="{% url 'activity_add' %}" class="btn btn-primary">Add Activity</a>
    </div>
</div>

<!-- Date selector -->
<form id="date-form" method="post">
    {% csrf_token %}
    <div class="form-group">
        {{ form.date.label_tag }}
        {{ form.date }}
    </div>
</form>

<!-- Totals -->


<!-- Activities -->


{% if data %}
    <h2>Results:</h2>
    <p>{{ data.message }}</p>
    <p>{{ data.extra }}</p>
{% endif %}

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const dateInput = document.querySelector("input[type='date']");
        const form = document.getElementById("date-form");

        if (!dateInput.value) {
            const today = new Date().toISOString().split('T')[0];
            dateInput.value = today;
            form.submit();  // submit once with today's date
        }

        dateInput.addEventListener("change", function () {
            form.submit();  // also submit on manual change
        });
    });
</script>

{% endblock %}